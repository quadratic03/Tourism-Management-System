<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support - Tourist Management System</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../../css/style.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="../dashboard.html" class="sidebar-logo">
                    <div class="d-flex align-items-center">
                        <img src="../../img/logo.png" alt="Logo" class="logo-img" onerror="this.src='https://via.placeholder.com/50x50?text=TMS'">
                        <span class="logo-text">TMS</span>
                    </div>
                </a>
                <a href="#" class="sidebar-collapse d-none d-md-block">
                    <i class="fas fa-bars"></i>
                </a>
            </div>
            <div class="sidebar-menu">
                <a href="../dashboard.html" class="menu-item">
                    <i class="fas fa-tachometer-alt"></i>
                    <span class="menu-item-text">Dashboard</span>
                </a>
                <a href="../tourists/index.html" class="menu-item">
                    <i class="fas fa-users"></i>
                    <span class="menu-item-text">Tourists</span>
                </a>
                <a href="../bookings/index.html" class="menu-item">
                    <i class="fas fa-calendar-check"></i>
                    <span class="menu-item-text">Bookings</span>
                </a>
                <div class="menu-divider"></div>
                <a href="../analytics/index.html" class="menu-item">
                    <i class="fas fa-chart-line"></i>
                    <span class="menu-item-text">Analytics</span>
                </a>
                <a href="../guides/index.html" class="menu-item">
                    <i class="fas fa-user-tie"></i>
                    <span class="menu-item-text">Tour Guides</span>
                </a>
                <a href="../payments/index.html" class="menu-item">
                    <i class="fas fa-credit-card"></i>
                    <span class="menu-item-text">Payments</span>
                </a>
                <a href="../weather/index.html" class="menu-item">
                    <i class="fas fa-cloud-sun"></i>
                    <span class="menu-item-text">Weather</span>
                </a>
                <a href="../documents/index.html" class="menu-item">
                    <i class="fas fa-file-alt"></i>
                    <span class="menu-item-text">Documents</span>
                </a>
                <a href="../itinerary/index.html" class="menu-item">
                    <i class="fas fa-route"></i>
                    <span class="menu-item-text">Itinerary</span>
                </a>
                <a href="index.html" class="menu-item active">
                    <i class="fas fa-headset"></i>
                    <span class="menu-item-text">Support</span>
                </a>
                <a href="../social/index.html" class="menu-item">
                    <i class="fas fa-share-alt"></i>
                    <span class="menu-item-text">Social</span>
                </a>
                <div class="menu-divider"></div>
                <a href="../reports/index.html" class="menu-item">
                    <i class="fas fa-chart-bar"></i>
                    <span class="menu-item-text">Reports</span>
                </a>
                <a href="../settings/index.html" class="menu-item">
                    <i class="fas fa-cog"></i>
                    <span class="menu-item-text">Settings</span>
                </a>
                <div class="menu-divider"></div>
                <a href="#" class="menu-item" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span class="menu-item-text">Logout</span>
                </a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content" id="mainContent">
            <!-- Header -->
            <div class="main-header">
                <div class="d-flex align-items-center">
                    <button class="header-btn me-2" id="sidebarToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h4 class="page-title">Support Center</h4>
                </div>
                <div class="header-controls">
                    <button class="header-btn">
                        <i class="fas fa-search"></i>
                    </button>
                    <button class="header-btn">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge"></span>
                    </button>
                    <div class="user-profile">
                        <div class="user-avatar">
                            <img src="https://via.placeholder.com/150" alt="User Avatar">
                        </div>
                        <div class="user-info">
                            <p class="user-name" id="userName">Loading...</p>
                            <p class="user-role" id="userRole">Loading...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content Container -->
            <div class="content-container">
                <!-- Stats Row -->
                <div class="row mb-4">
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-icon primary">
                                <i class="fas fa-ticket-alt"></i>
                            </div>
                            <div class="stat-info">
                                <h3 class="stat-value">24</h3>
                                <p class="stat-label">Open Tickets</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-icon success">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-info">
                                <h3 class="stat-value">156</h3>
                                <p class="stat-label">Resolved</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-icon warning">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-info">
                                <h3 class="stat-value">6</h3>
                                <p class="stat-label">Pending</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-icon info">
                                <i class="fas fa-headset"></i>
                            </div>
                            <div class="stat-info">
                                <h3 class="stat-value">2.5h</h3>
                                <p class="stat-label">Avg. Response</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Support Actions -->
                <div class="row mb-4">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h5 class="card-title mb-0">Quick Actions</h5>
                                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#newTicketModal">
                                        <i class="fas fa-plus me-1"></i> New Support Ticket
                                    </button>
                                </div>
                                <div class="row">
                                    <div class="col-md-3">
                                        <a href="#" class="support-action-card">
                                            <div class="support-action-icon">
                                                <i class="fas fa-book"></i>
                                            </div>
                                            <h6>Knowledge Base</h6>
                                            <p>Find answers to common questions</p>
                                        </a>
                                    </div>
                                    <div class="col-md-3">
                                        <a href="#" class="support-action-card">
                                            <div class="support-action-icon">
                                                <i class="fas fa-comments"></i>
                                            </div>
                                            <h6>Live Chat</h6>
                                            <p>Chat with a support agent</p>
                                        </a>
                                    </div>
                                    <div class="col-md-3">
                                        <a href="#" class="support-action-card">
                                            <div class="support-action-icon">
                                                <i class="fas fa-video"></i>
                                            </div>
                                            <h6>Video Tutorials</h6>
                                            <p>Step-by-step guide videos</p>
                                        </a>
                                    </div>
                                    <div class="col-md-3">
                                        <a href="#" class="support-action-card">
                                            <div class="support-action-icon">
                                                <i class="fas fa-phone-alt"></i>
                                            </div>
                                            <h6>Contact Us</h6>
                                            <p>Get in touch with our team</p>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Support Tickets -->
                <div class="card mb-4">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="card-title mb-0">Support Tickets</h5>
                        <div>
                            <select class="form-select form-select-sm d-inline-block w-auto me-2">
                                <option>All Tickets</option>
                                <option>Open</option>
                                <option>In Progress</option>
                                <option>Resolved</option>
                                <option>Closed</option>
                            </select>
                            <div class="input-group input-group-sm" style="width: 200px; display: inline-flex;">
                                <input type="text" class="form-control" placeholder="Search tickets...">
                                <button class="btn btn-outline-secondary" type="button">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover align-middle mb-0">
                                <thead class="table-light">
                                    <tr>
                                        <th>Ticket ID</th>
                                        <th>Subject</th>
                                        <th>Submitted By</th>
                                        <th>Date</th>
                                        <th>Priority</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>#TKT-2023-001</td>
                                        <td>Booking cancellation issue</td>
                                        <td>John Smith</td>
                                        <td>2023-08-15</td>
                                        <td><span class="badge bg-danger">High</span></td>
                                        <td><span class="badge bg-warning">In Progress</span></td>
                                        <td>
                                            <div class="btn-group">
                                                <button class="btn btn-sm btn-outline-primary">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-success">
                                                    <i class="fas fa-reply"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
                                                    <i class="fas fa-ellipsis-v"></i>
                                                </button>
                                                <ul class="dropdown-menu">
                                                    <li><a class="dropdown-item" href="#">Assign</a></li>
                                                    <li><a class="dropdown-item" href="#">Change Priority</a></li>
                                                    <li><a class="dropdown-item" href="#">Mark as Resolved</a></li>
                                                    <li><hr class="dropdown-divider"></li>
                                                    <li><a class="dropdown-item text-danger" href="#">Close Ticket</a></li>
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>#TKT-2023-002</td>
                                        <td>Payment not processing</td>
                                        <td>Emma Johnson</td>
                                        <td>2023-08-16</td>
                                        <td><span class="badge bg-danger">High</span></td>
                                        <td><span class="badge bg-primary">Open</span></td>
                                        <td>
                                            <div class="btn-group">
                                                <button class="btn btn-sm btn-outline-primary">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-success">
                                                    <i class="fas fa-reply"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
                                                    <i class="fas fa-ellipsis-v"></i>
                                                </button>
                                                <ul class="dropdown-menu">
                                                    <li><a class="dropdown-item" href="#">Assign</a></li>
                                                    <li><a class="dropdown-item" href="#">Change Priority</a></li>
                                                    <li><a class="dropdown-item" href="#">Mark as Resolved</a></li>
                                                    <li><hr class="dropdown-divider"></li>
                                                    <li><a class="dropdown-item text-danger" href="#">Close Ticket</a></li>
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>#TKT-2023-003</td>
                                        <td>Login authentication failed</td>
                                        <td>Michael Brown</td>
                                        <td>2023-08-14</td>
                                        <td><span class="badge bg-warning">Medium</span></td>
                                        <td><span class="badge bg-success">Resolved</span></td>
                                        <td>
                                            <div class="btn-group">
                                                <button class="btn btn-sm btn-outline-primary">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-success">
                                                    <i class="fas fa-reply"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
                                                    <i class="fas fa-ellipsis-v"></i>
                                                </button>
                                                <ul class="dropdown-menu">
                                                    <li><a class="dropdown-item" href="#">Assign</a></li>
                                                    <li><a class="dropdown-item" href="#">Change Priority</a></li>
                                                    <li><a class="dropdown-item" href="#">Reopen Ticket</a></li>
                                                    <li><hr class="dropdown-divider"></li>
                                                    <li><a class="dropdown-item text-danger" href="#">Close Ticket</a></li>
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>#TKT-2023-004</td>
                                        <td>Feature request: Add group bookings</td>
                                        <td>Sarah Wilson</td>
                                        <td>2023-08-11</td>
                                        <td><span class="badge bg-info">Low</span></td>
                                        <td><span class="badge bg-secondary">Pending</span></td>
                                        <td>
                                            <div class="btn-group">
                                                <button class="btn btn-sm btn-outline-primary">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-success">
                                                    <i class="fas fa-reply"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
                                                    <i class="fas fa-ellipsis-v"></i>
                                                </button>
                                                <ul class="dropdown-menu">
                                                    <li><a class="dropdown-item" href="#">Assign</a></li>
                                                    <li><a class="dropdown-item" href="#">Change Priority</a></li>
                                                    <li><a class="dropdown-item" href="#">Mark as Resolved</a></li>
                                                    <li><hr class="dropdown-divider"></li>
                                                    <li><a class="dropdown-item text-danger" href="#">Close Ticket</a></li>
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="card-footer">
                        <nav>
                            <ul class="pagination justify-content-end mb-0">
                                <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item"><a class="page-link" href="#">Next</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
                
                <!-- FAQ Section -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Frequently Asked Questions</h5>
                    </div>
                    <div class="card-body">
                        <div class="accordion" id="faqAccordion">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                        How do I cancel a booking?
                                    </button>
                                </h2>
                                <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        To cancel a booking, navigate to the Bookings page, find the booking you want to cancel, click on the three-dot menu, and select "Cancel Booking". You'll need to provide a reason for cancellation and confirm. Please note that cancellation policies may apply depending on how close the cancellation is to the scheduled tour date.
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                        How do I process refunds for customers?
                                    </button>
                                </h2>
                                <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        To process a refund, go to the Payments section, find the transaction, click "Process Refund", select full or partial refund, enter the amount (if partial), add a note explaining the reason, and confirm. The system will automatically process the refund back to the customer's original payment method.
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                        How do I assign a guide to a tour?
                                    </button>
                                </h2>
                                <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        To assign a guide, go to the Bookings page, select the booking you want to assign a guide to, click "Assign Guide", and you'll see a list of available guides for that date and time. You can filter by specialization, languages, or rating. Select the guide and confirm the assignment.
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                        How can I export financial reports?
                                    </button>
                                </h2>
                                <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        To export financial reports, navigate to the Reports section, select "Financial Reports" from the dropdown menu, choose the date range and report type (daily, weekly, monthly, quarterly, or yearly), select the format (PDF, Excel, or CSV), and click "Generate Report". The system will process your request and provide a download link for the generated report.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- New Ticket Modal -->
    <div class="modal fade" id="newTicketModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create New Support Ticket</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="ticketSubject" class="form-label">Subject</label>
                            <input type="text" class="form-control" id="ticketSubject" required>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="ticketCategory" class="form-label">Category</label>
                                <select class="form-select" id="ticketCategory" required>
                                    <option value="" selected disabled>Select category</option>
                                    <option>Booking Issues</option>
                                    <option>Payment Problems</option>
                                    <option>Account Access</option>
                                    <option>Tour Guide Feedback</option>
                                    <option>System Bugs</option>
                                    <option>Feature Request</option>
                                    <option>Other</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="ticketPriority" class="form-label">Priority</label>
                                <select class="form-select" id="ticketPriority" required>
                                    <option value="" selected disabled>Select priority</option>
                                    <option>Low</option>
                                    <option>Medium</option>
                                    <option>High</option>
                                    <option>Critical</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="ticketDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="ticketDescription" rows="5" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="ticketAttachment" class="form-label">Attachments (Optional)</label>
                            <input type="file" class="form-control" id="ticketAttachment" multiple>
                            <div class="form-text">You can attach up to 5 files (max 5MB each)</div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary">Submit Ticket</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="../../js/main.js"></script>
    <script src="../../js/support.js"></script>
</body>
</html>
